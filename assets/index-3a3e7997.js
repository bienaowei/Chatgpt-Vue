import{j as W,aA as ct,aB as dt,ao as ge,be as ut,bf as ft,n as M,r as D,P as te,b9 as he,a_ as J,v as b,J as ht,b8 as xe,aC as le,bg as vt,bh as ke,b as Fe,g as V,_ as G,f as X,u as Ae,m as ne,bi as gt,aQ as pt,L as pe,bj as mt,$ as Y,p as _e,b1 as Ke,bk as me,Q as Be,T as yt,F as Z,Z as bt,i as St,aH as wt,t as j,bl as xt,w as Ce,aK as se,O as Te,b7 as Pe,a$ as kt,bm as Ct,aX as Tt,ag as Pt,bn as zt,bo as q,bp as ze,bq as He}from"./index-3db49874.js";function Re(e,t){let{target:n}=e;for(;n;){if(n.dataset&&n.dataset[t]!==void 0)return!0;n=n.parentElement}return!1}function ae(e){const t=e.filter(n=>n!==void 0);if(t.length!==0)return t.length===1?t[0]:n=>{e.forEach(o=>{o&&o(n)})}}function Ne(e){return e&-e}class Rt{constructor(t,n){this.l=t,this.min=n;const o=new Array(t+1);for(let i=0;i<t+1;++i)o[i]=0;this.ft=o}add(t,n){if(n===0)return;const{l:o,ft:i}=this;for(t+=1;t<=o;)i[t]+=n,t+=Ne(t)}get(t){return this.sum(t+1)-this.sum(t)}sum(t){if(t===void 0&&(t=this.l),t<=0)return 0;const{ft:n,min:o,l:i}=this;if(t>i)throw new Error("[FinweckTree.sum]: `i` is larger than length.");let l=t*o;for(;t>0;)l+=n[t],t-=Ne(t);return l}getBound(t){let n=0,o=this.l;for(;o>n;){const i=Math.floor((n+o)/2),l=this.sum(i);if(l>t){o=i;continue}else if(l<t){if(n===i)return this.sum(n+1)<=t?n+1:i;n=i}else return i}return n}}let ee;function Nt(){return typeof document>"u"?!1:(ee===void 0&&("matchMedia"in window?ee=window.matchMedia("(pointer:coarse)").matches:ee=!1),ee)}let ce;function Le(){return typeof document>"u"?1:(ce===void 0&&(ce="chrome"in window?window.devicePixelRatio:1),ce)}const Lt=le(".v-vl",{maxHeight:"inherit",height:"100%",overflow:"auto",minWidth:"1px"},[le("&:not(.v-vl--show-scrollbar)",{scrollbarWidth:"none"},[le("&::-webkit-scrollbar, &::-webkit-scrollbar-track-piece, &::-webkit-scrollbar-thumb",{width:0,height:0,display:"none"})])]),Mt=W({name:"VirtualList",inheritAttrs:!1,props:{showScrollbar:{type:Boolean,default:!0},items:{type:Array,default:()=>[]},itemSize:{type:Number,required:!0},itemResizable:Boolean,itemsStyle:[String,Object],visibleItemsTag:{type:[String,Object],default:"div"},visibleItemsProps:Object,ignoreItemResize:Boolean,onScroll:Function,onWheel:Function,onResize:Function,defaultScrollKey:[Number,String],defaultScrollIndex:Number,keyField:{type:String,default:"key"},paddingTop:{type:[Number,String],default:0},paddingBottom:{type:[Number,String],default:0}},setup(e){const t=ct();Lt.mount({id:"vueuc/virtual-list",head:!0,anchorMetaName:dt,ssr:t}),ge(()=>{const{defaultScrollIndex:h,defaultScrollKey:y}=e;h!=null?m({index:h}):y!=null&&m({key:y})});let n=!1,o=!1;ut(()=>{if(n=!1,!o){o=!0;return}m({top:c.value,left:d})}),ft(()=>{n=!0,o||(o=!0)});const i=M(()=>{const h=new Map,{keyField:y}=e;return e.items.forEach((w,C)=>{h.set(w[y],C)}),h}),l=D(null),r=D(void 0),a=new Map,v=M(()=>{const{items:h,itemSize:y,keyField:w}=e,C=new Rt(h.length,y);return h.forEach((N,O)=>{const R=N[w],I=a.get(R);I!==void 0&&C.add(O,I)}),C}),u=D(0);let d=0;const c=D(0),S=te(()=>Math.max(v.value.getBound(c.value-he(e.paddingTop))-1,0)),T=M(()=>{const{value:h}=r;if(h===void 0)return[];const{items:y,itemSize:w}=e,C=S.value,N=Math.min(C+Math.ceil(h/w+1),y.length-1),O=[];for(let R=C;R<=N;++R)O.push(y[R]);return O}),m=(h,y)=>{if(typeof h=="number"){k(h,y,"auto");return}const{left:w,top:C,index:N,key:O,position:R,behavior:I,debounce:H=!0}=h;if(w!==void 0||C!==void 0)k(w,C,I);else if(N!==void 0)x(N,I,H);else if(O!==void 0){const $=i.value.get(O);$!==void 0&&x($,I,H)}else R==="bottom"?k(0,Number.MAX_SAFE_INTEGER,I):R==="top"&&k(0,0,I)};let P,_=null;function x(h,y,w){const{value:C}=v,N=C.sum(h)+he(e.paddingTop);if(!w)l.value.scrollTo({left:0,top:N,behavior:y});else{P=h,_!==null&&window.clearTimeout(_),_=window.setTimeout(()=>{P=void 0,_=null},16);const{scrollTop:O,offsetHeight:R}=l.value;if(N>O){const I=C.get(h);N+I<=O+R||l.value.scrollTo({left:0,top:N+I-R,behavior:y})}else l.value.scrollTo({left:0,top:N,behavior:y})}}function k(h,y,w){l.value.scrollTo({left:h,top:y,behavior:w})}function E(h,y){var w,C,N;if(n||e.ignoreItemResize||z(y.target))return;const{value:O}=v,R=i.value.get(h),I=O.get(R),H=(N=(C=(w=y.borderBoxSize)===null||w===void 0?void 0:w[0])===null||C===void 0?void 0:C.blockSize)!==null&&N!==void 0?N:y.contentRect.height;if(H===I)return;H-e.itemSize===0?a.delete(h):a.set(h,H-e.itemSize);const U=H-I;if(U===0)return;O.add(R,U);const s=l.value;if(s!=null){if(P===void 0){const f=O.sum(R);s.scrollTop>f&&s.scrollBy(0,U)}else if(R<P)s.scrollBy(0,U);else if(R===P){const f=O.sum(R);H+f>s.scrollTop+s.offsetHeight&&s.scrollBy(0,U)}A()}u.value++}const g=!Nt();let p=!1;function L(h){var y;(y=e.onScroll)===null||y===void 0||y.call(e,h),(!g||!p)&&A()}function B(h){var y;if((y=e.onWheel)===null||y===void 0||y.call(e,h),g){const w=l.value;if(w!=null){if(h.deltaX===0&&(w.scrollTop===0&&h.deltaY<=0||w.scrollTop+w.offsetHeight>=w.scrollHeight&&h.deltaY>=0))return;h.preventDefault(),w.scrollTop+=h.deltaY/Le(),w.scrollLeft+=h.deltaX/Le(),A(),p=!0,vt(()=>{p=!1})}}}function K(h){if(n||z(h.target)||h.contentRect.height===r.value)return;r.value=h.contentRect.height;const{onResize:y}=e;y!==void 0&&y(h)}function A(){const{value:h}=l;h!=null&&(c.value=h.scrollTop,d=h.scrollLeft)}function z(h){let y=h;for(;y!==null;){if(y.style.display==="none")return!0;y=y.parentElement}return!1}return{listHeight:r,listStyle:{overflow:"auto"},keyToIndex:i,itemsStyle:M(()=>{const{itemResizable:h}=e,y=J(v.value.sum());return u.value,[e.itemsStyle,{boxSizing:"content-box",height:h?"":y,minHeight:h?y:"",paddingTop:J(e.paddingTop),paddingBottom:J(e.paddingBottom)}]}),visibleItemsStyle:M(()=>(u.value,{transform:`translateY(${J(v.value.sum(S.value))})`})),viewportItems:T,listElRef:l,itemsElRef:D(null),scrollTo:m,handleListResize:K,handleListScroll:L,handleListWheel:B,handleItemResize:E}},render(){const{itemResizable:e,keyField:t,keyToIndex:n,visibleItemsTag:o}=this;return b(xe,{onResize:this.handleListResize},{default:()=>{var i,l;return b("div",ht(this.$attrs,{class:["v-vl",this.showScrollbar&&"v-vl--show-scrollbar"],onScroll:this.handleListScroll,onWheel:this.handleListWheel,ref:"listElRef"}),[this.items.length!==0?b("div",{ref:"itemsElRef",class:"v-vl-items",style:this.itemsStyle},[b(o,Object.assign({class:"v-vl-visible-items",style:this.visibleItemsStyle},this.visibleItemsProps),{default:()=>this.viewportItems.map(r=>{const a=r[t],v=n.get(a),u=this.$slots.default({item:r,index:v})[0];return e?b(xe,{key:a,onResize:d=>this.handleItemResize(a,d)},{default:()=>u}):(u.key=a,u)})})]):(l=(i=this.$slots).empty)===null||l===void 0?void 0:l.call(i)])}})}});function Et(e,t){t&&(ge(()=>{const{value:n}=e;n&&ke.registerHandler(n,t)}),Fe(()=>{const{value:n}=e;n&&ke.unregisterHandler(n)}))}const Ot=W({name:"Checkmark",render(){return b("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16"},b("g",{fill:"none"},b("path",{d:"M14.046 3.486a.75.75 0 0 1-.032 1.06l-7.93 7.474a.85.85 0 0 1-1.188-.022l-2.68-2.72a.75.75 0 1 1 1.068-1.053l2.234 2.267l7.468-7.038a.75.75 0 0 1 1.06.032z",fill:"currentColor"})))}}),It=W({name:"Empty",render(){return b("svg",{viewBox:"0 0 28 28",fill:"none",xmlns:"http://www.w3.org/2000/svg"},b("path",{d:"M26 7.5C26 11.0899 23.0899 14 19.5 14C15.9101 14 13 11.0899 13 7.5C13 3.91015 15.9101 1 19.5 1C23.0899 1 26 3.91015 26 7.5ZM16.8536 4.14645C16.6583 3.95118 16.3417 3.95118 16.1464 4.14645C15.9512 4.34171 15.9512 4.65829 16.1464 4.85355L18.7929 7.5L16.1464 10.1464C15.9512 10.3417 15.9512 10.6583 16.1464 10.8536C16.3417 11.0488 16.6583 11.0488 16.8536 10.8536L19.5 8.20711L22.1464 10.8536C22.3417 11.0488 22.6583 11.0488 22.8536 10.8536C23.0488 10.6583 23.0488 10.3417 22.8536 10.1464L20.2071 7.5L22.8536 4.85355C23.0488 4.65829 23.0488 4.34171 22.8536 4.14645C22.6583 3.95118 22.3417 3.95118 22.1464 4.14645L19.5 6.79289L16.8536 4.14645Z",fill:"currentColor"}),b("path",{d:"M25 22.75V12.5991C24.5572 13.0765 24.053 13.4961 23.5 13.8454V16H17.5L17.3982 16.0068C17.0322 16.0565 16.75 16.3703 16.75 16.75C16.75 18.2688 15.5188 19.5 14 19.5C12.4812 19.5 11.25 18.2688 11.25 16.75L11.2432 16.6482C11.1935 16.2822 10.8797 16 10.5 16H4.5V7.25C4.5 6.2835 5.2835 5.5 6.25 5.5H12.2696C12.4146 4.97463 12.6153 4.47237 12.865 4H6.25C4.45507 4 3 5.45507 3 7.25V22.75C3 24.5449 4.45507 26 6.25 26H21.75C23.5449 26 25 24.5449 25 22.75ZM4.5 22.75V17.5H9.81597L9.85751 17.7041C10.2905 19.5919 11.9808 21 14 21L14.215 20.9947C16.2095 20.8953 17.842 19.4209 18.184 17.5H23.5V22.75C23.5 23.7165 22.7165 24.5 21.75 24.5H6.25C5.2835 24.5 4.5 23.7165 4.5 22.75Z",fill:"currentColor"}))}}),Ft=W({props:{onFocus:Function,onBlur:Function},setup(e){return()=>b("div",{style:"width: 0; height: 0",tabindex:0,onFocus:e.onFocus,onBlur:e.onBlur})}});function Me(e){return Array.isArray(e)?e:[e]}const ve={STOP:"STOP"};function $e(e,t){const n=t(e);e.children!==void 0&&n!==ve.STOP&&e.children.forEach(o=>$e(o,t))}function At(e,t={}){const{preserveGroup:n=!1}=t,o=[],i=n?r=>{r.isLeaf||(o.push(r.key),l(r.children))}:r=>{r.isLeaf||(r.isGroup||o.push(r.key),l(r.children))};function l(r){r.forEach(i)}return l(e),o}function _t(e,t){const{isLeaf:n}=e;return n!==void 0?n:!t(e)}function Kt(e){return e.children}function Bt(e){return e.key}function Ht(){return!1}function $t(e,t){const{isLeaf:n}=e;return!(n===!1&&!Array.isArray(t(e)))}function Gt(e){return e.disabled===!0}function jt(e,t){return e.isLeaf===!1&&!Array.isArray(t(e))}function de(e){var t;return e==null?[]:Array.isArray(e)?e:(t=e.checkedKeys)!==null&&t!==void 0?t:[]}function ue(e){var t;return e==null||Array.isArray(e)?[]:(t=e.indeterminateKeys)!==null&&t!==void 0?t:[]}function Vt(e,t){const n=new Set(e);return t.forEach(o=>{n.has(o)||n.add(o)}),Array.from(n)}function Dt(e,t){const n=new Set(e);return t.forEach(o=>{n.has(o)&&n.delete(o)}),Array.from(n)}function Wt(e){return(e==null?void 0:e.type)==="group"}function Ut(e){const t=new Map;return e.forEach((n,o)=>{t.set(n.key,o)}),n=>{var o;return(o=t.get(n))!==null&&o!==void 0?o:null}}class Zt extends Error{constructor(){super(),this.message="SubtreeNotLoadedError: checking a subtree whose required nodes are not fully loaded."}}function Yt(e,t,n,o){return oe(t.concat(e),n,o,!1)}function Xt(e,t){const n=new Set;return e.forEach(o=>{const i=t.treeNodeMap.get(o);if(i!==void 0){let l=i.parent;for(;l!==null&&!(l.disabled||n.has(l.key));)n.add(l.key),l=l.parent}}),n}function qt(e,t,n,o){const i=oe(t,n,o,!1),l=oe(e,n,o,!0),r=Xt(e,n),a=[];return i.forEach(v=>{(l.has(v)||r.has(v))&&a.push(v)}),a.forEach(v=>i.delete(v)),i}function fe(e,t){const{checkedKeys:n,keysToCheck:o,keysToUncheck:i,indeterminateKeys:l,cascade:r,leafOnly:a,checkStrategy:v,allowNotLoaded:u}=e;if(!r)return o!==void 0?{checkedKeys:Vt(n,o),indeterminateKeys:Array.from(l)}:i!==void 0?{checkedKeys:Dt(n,i),indeterminateKeys:Array.from(l)}:{checkedKeys:Array.from(n),indeterminateKeys:Array.from(l)};const{levelTreeNodeMap:d}=t;let c;i!==void 0?c=qt(i,n,t,u):o!==void 0?c=Yt(o,n,t,u):c=oe(n,t,u,!1);const S=v==="parent",T=v==="child"||a,m=c,P=new Set,_=Math.max.apply(null,Array.from(d.keys()));for(let x=_;x>=0;x-=1){const k=x===0,E=d.get(x);for(const g of E){if(g.isLeaf)continue;const{key:p,shallowLoaded:L}=g;if(T&&L&&g.children.forEach(z=>{!z.disabled&&!z.isLeaf&&z.shallowLoaded&&m.has(z.key)&&m.delete(z.key)}),g.disabled||!L)continue;let B=!0,K=!1,A=!0;for(const z of g.children){const h=z.key;if(!z.disabled){if(A&&(A=!1),m.has(h))K=!0;else if(P.has(h)){K=!0,B=!1;break}else if(B=!1,K)break}}B&&!A?(S&&g.children.forEach(z=>{!z.disabled&&m.has(z.key)&&m.delete(z.key)}),m.add(p)):K&&P.add(p),k&&T&&m.has(p)&&m.delete(p)}}return{checkedKeys:Array.from(m),indeterminateKeys:Array.from(P)}}function oe(e,t,n,o){const{treeNodeMap:i,getChildren:l}=t,r=new Set,a=new Set(e);return e.forEach(v=>{const u=i.get(v);u!==void 0&&$e(u,d=>{if(d.disabled)return ve.STOP;const{key:c}=d;if(!r.has(c)&&(r.add(c),a.add(c),jt(d.rawNode,l))){if(o)return ve.STOP;if(!n)throw new Zt}})}),a}function Qt(e,{includeGroup:t=!1,includeSelf:n=!0},o){var i;const l=o.treeNodeMap;let r=e==null?null:(i=l.get(e))!==null&&i!==void 0?i:null;const a={keyPath:[],treeNodePath:[],treeNode:r};if(r!=null&&r.ignored)return a.treeNode=null,a;for(;r;)!r.ignored&&(t||!r.isGroup)&&a.treeNodePath.push(r),r=r.parent;return a.treeNodePath.reverse(),n||a.treeNodePath.pop(),a.keyPath=a.treeNodePath.map(v=>v.key),a}function Jt(e){if(e.length===0)return null;const t=e[0];return t.isGroup||t.ignored||t.disabled?t.getNext():t}function en(e,t){const n=e.siblings,o=n.length,{index:i}=e;return t?n[(i+1)%o]:i===n.length-1?null:n[i+1]}function Ee(e,t,{loop:n=!1,includeDisabled:o=!1}={}){const i=t==="prev"?tn:en,l={reverse:t==="prev"};let r=!1,a=null;function v(u){if(u!==null){if(u===e){if(!r)r=!0;else if(!e.disabled&&!e.isGroup){a=e;return}}else if((!u.disabled||o)&&!u.ignored&&!u.isGroup){a=u;return}if(u.isGroup){const d=ye(u,l);d!==null?a=d:v(i(u,n))}else{const d=i(u,!1);if(d!==null)v(d);else{const c=nn(u);c!=null&&c.isGroup?v(i(c,n)):n&&v(i(u,!0))}}}}return v(e),a}function tn(e,t){const n=e.siblings,o=n.length,{index:i}=e;return t?n[(i-1+o)%o]:i===0?null:n[i-1]}function nn(e){return e.parent}function ye(e,t={}){const{reverse:n=!1}=t,{children:o}=e;if(o){const{length:i}=o,l=n?i-1:0,r=n?-1:i,a=n?-1:1;for(let v=l;v!==r;v+=a){const u=o[v];if(!u.disabled&&!u.ignored)if(u.isGroup){const d=ye(u,t);if(d!==null)return d}else return u}}return null}const on={getChild(){return this.ignored?null:ye(this)},getParent(){const{parent:e}=this;return e!=null&&e.isGroup?e.getParent():e},getNext(e={}){return Ee(this,"next",e)},getPrev(e={}){return Ee(this,"prev",e)}};function rn(e,t){const n=t?new Set(t):void 0,o=[];function i(l){l.forEach(r=>{o.push(r),!(r.isLeaf||!r.children||r.ignored)&&(r.isGroup||n===void 0||n.has(r.key))&&i(r.children)})}return i(e),o}function ln(e,t){const n=e.key;for(;t;){if(t.key===n)return!0;t=t.parent}return!1}function Ge(e,t,n,o,i,l=null,r=0){const a=[];return e.forEach((v,u)=>{var d;const c=Object.create(o);if(c.rawNode=v,c.siblings=a,c.level=r,c.index=u,c.isFirstChild=u===0,c.isLastChild=u+1===e.length,c.parent=l,!c.ignored){const S=i(v);Array.isArray(S)&&(c.children=Ge(S,t,n,o,i,c,r+1))}a.push(c),t.set(c.key,c),n.has(r)||n.set(r,[]),(d=n.get(r))===null||d===void 0||d.push(c)}),a}function xn(e,t={}){var n;const o=new Map,i=new Map,{getDisabled:l=Gt,getIgnored:r=Ht,getIsGroup:a=Wt,getKey:v=Bt}=t,u=(n=t.getChildren)!==null&&n!==void 0?n:Kt,d=t.ignoreEmptyChildren?g=>{const p=u(g);return Array.isArray(p)?p.length?p:null:p}:u,c=Object.assign({get key(){return v(this.rawNode)},get disabled(){return l(this.rawNode)},get isGroup(){return a(this.rawNode)},get isLeaf(){return _t(this.rawNode,d)},get shallowLoaded(){return $t(this.rawNode,d)},get ignored(){return r(this.rawNode)},contains(g){return ln(this,g)}},on),S=Ge(e,o,i,c,d);function T(g){if(g==null)return null;const p=o.get(g);return p&&!p.isGroup&&!p.ignored?p:null}function m(g){if(g==null)return null;const p=o.get(g);return p&&!p.ignored?p:null}function P(g,p){const L=m(g);return L?L.getPrev(p):null}function _(g,p){const L=m(g);return L?L.getNext(p):null}function x(g){const p=m(g);return p?p.getParent():null}function k(g){const p=m(g);return p?p.getChild():null}const E={treeNodes:S,treeNodeMap:o,levelTreeNodeMap:i,maxLevel:Math.max(...i.keys()),getChildren:d,getFlattenedNodes(g){return rn(S,g)},getNode:T,getPrev:P,getNext:_,getParent:x,getChild:k,getFirstAvailableNode(){return Jt(S)},getPath(g,p={}){return Qt(g,p,E)},getCheckedKeys(g,p={}){const{cascade:L=!0,leafOnly:B=!1,checkStrategy:K="all",allowNotLoaded:A=!1}=p;return fe({checkedKeys:de(g),indeterminateKeys:ue(g),cascade:L,leafOnly:B,checkStrategy:K,allowNotLoaded:A},E)},check(g,p,L={}){const{cascade:B=!0,leafOnly:K=!1,checkStrategy:A="all",allowNotLoaded:z=!1}=L;return fe({checkedKeys:de(p),indeterminateKeys:ue(p),keysToCheck:g==null?[]:Me(g),cascade:B,leafOnly:K,checkStrategy:A,allowNotLoaded:z},E)},uncheck(g,p,L={}){const{cascade:B=!0,leafOnly:K=!1,checkStrategy:A="all",allowNotLoaded:z=!1}=L;return fe({checkedKeys:de(p),indeterminateKeys:ue(p),keysToUncheck:g==null?[]:Me(g),cascade:B,leafOnly:K,checkStrategy:A,allowNotLoaded:z},E)},getNonLeafKeys(g={}){return At(S,g)}};return E}const sn=V("empty",`
 display: flex;
 flex-direction: column;
 align-items: center;
 font-size: var(--n-font-size);
`,[G("icon",`
 width: var(--n-icon-size);
 height: var(--n-icon-size);
 font-size: var(--n-icon-size);
 line-height: var(--n-icon-size);
 color: var(--n-icon-color);
 transition:
 color .3s var(--n-bezier);
 `,[X("+",[G("description",`
 margin-top: 8px;
 `)])]),G("description",`
 transition: color .3s var(--n-bezier);
 color: var(--n-text-color);
 `),G("extra",`
 text-align: center;
 transition: color .3s var(--n-bezier);
 margin-top: 12px;
 color: var(--n-extra-text-color);
 `)]),an=Object.assign(Object.assign({},ne.props),{description:String,showDescription:{type:Boolean,default:!0},showIcon:{type:Boolean,default:!0},size:{type:String,default:"medium"},renderIcon:Function}),cn=W({name:"Empty",props:an,setup(e){const{mergedClsPrefixRef:t,inlineThemeDisabled:n}=Ae(e),o=ne("Empty","-empty",sn,gt,e,t),{localeRef:i}=pt("Empty"),l=pe(mt,null),r=M(()=>{var d,c,S;return(d=e.description)!==null&&d!==void 0?d:(S=(c=l==null?void 0:l.mergedComponentPropsRef.value)===null||c===void 0?void 0:c.Empty)===null||S===void 0?void 0:S.description}),a=M(()=>{var d,c;return((c=(d=l==null?void 0:l.mergedComponentPropsRef.value)===null||d===void 0?void 0:d.Empty)===null||c===void 0?void 0:c.renderIcon)||(()=>b(It,null))}),v=M(()=>{const{size:d}=e,{common:{cubicBezierEaseInOut:c},self:{[Y("iconSize",d)]:S,[Y("fontSize",d)]:T,textColor:m,iconColor:P,extraTextColor:_}}=o.value;return{"--n-icon-size":S,"--n-font-size":T,"--n-bezier":c,"--n-text-color":m,"--n-icon-color":P,"--n-extra-text-color":_}}),u=n?_e("empty",M(()=>{let d="";const{size:c}=e;return d+=c[0],d}),v,e):void 0;return{mergedClsPrefix:t,mergedRenderIcon:a,localizedDescription:M(()=>r.value||i.value.description),cssVars:n?void 0:v,themeClass:u==null?void 0:u.themeClass,onRender:u==null?void 0:u.onRender}},render(){const{$slots:e,mergedClsPrefix:t,onRender:n}=this;return n==null||n(),b("div",{class:[`${t}-empty`,this.themeClass],style:this.cssVars},this.showIcon?b("div",{class:`${t}-empty__icon`},e.icon?e.icon():b(Ke,{clsPrefix:t},{default:this.mergedRenderIcon})):null,this.showDescription?b("div",{class:`${t}-empty__description`},e.default?e.default():this.localizedDescription):null,e.extra?b("div",{class:`${t}-empty__extra`},e.extra()):null)}});function dn(e,t){return b(yt,{name:"fade-in-scale-up-transition"},{default:()=>e?b(Ke,{clsPrefix:t,class:`${t}-base-select-option__check`},{default:()=>b(Ot)}):null})}const Oe=W({name:"NBaseSelectOption",props:{clsPrefix:{type:String,required:!0},tmNode:{type:Object,required:!0}},setup(e){const{valueRef:t,pendingTmNodeRef:n,multipleRef:o,valueSetRef:i,renderLabelRef:l,renderOptionRef:r,labelFieldRef:a,valueFieldRef:v,showCheckmarkRef:u,nodePropsRef:d,handleOptionClick:c,handleOptionMouseEnter:S}=pe(me),T=te(()=>{const{value:x}=n;return x?e.tmNode.key===x.key:!1});function m(x){const{tmNode:k}=e;k.disabled||c(x,k)}function P(x){const{tmNode:k}=e;k.disabled||S(x,k)}function _(x){const{tmNode:k}=e,{value:E}=T;k.disabled||E||S(x,k)}return{multiple:o,isGrouped:te(()=>{const{tmNode:x}=e,{parent:k}=x;return k&&k.rawNode.type==="group"}),showCheckmark:u,nodeProps:d,isPending:T,isSelected:te(()=>{const{value:x}=t,{value:k}=o;if(x===null)return!1;const E=e.tmNode.rawNode[v.value];if(k){const{value:g}=i;return g.has(E)}else return x===E}),labelField:a,renderLabel:l,renderOption:r,handleMouseMove:_,handleMouseEnter:P,handleClick:m}},render(){const{clsPrefix:e,tmNode:{rawNode:t},isSelected:n,isPending:o,isGrouped:i,showCheckmark:l,nodeProps:r,renderOption:a,renderLabel:v,handleClick:u,handleMouseEnter:d,handleMouseMove:c}=this,S=dn(n,e),T=v?[v(t,n),l&&S]:[Be(t[this.labelField],t,n),l&&S],m=r==null?void 0:r(t),P=b("div",Object.assign({},m,{class:[`${e}-base-select-option`,t.class,m==null?void 0:m.class,{[`${e}-base-select-option--disabled`]:t.disabled,[`${e}-base-select-option--selected`]:n,[`${e}-base-select-option--grouped`]:i,[`${e}-base-select-option--pending`]:o,[`${e}-base-select-option--show-checkmark`]:l}],style:[(m==null?void 0:m.style)||"",t.style||""],onClick:ae([u,m==null?void 0:m.onClick]),onMouseenter:ae([d,m==null?void 0:m.onMouseenter]),onMousemove:ae([c,m==null?void 0:m.onMousemove])}),b("div",{class:`${e}-base-select-option__content`},T));return t.render?t.render({node:P,option:t,selected:n}):a?a({node:P,option:t,selected:n}):P}}),Ie=W({name:"NBaseSelectGroupHeader",props:{clsPrefix:{type:String,required:!0},tmNode:{type:Object,required:!0}},setup(){const{renderLabelRef:e,renderOptionRef:t,labelFieldRef:n,nodePropsRef:o}=pe(me);return{labelField:n,nodeProps:o,renderLabel:e,renderOption:t}},render(){const{clsPrefix:e,renderLabel:t,renderOption:n,nodeProps:o,tmNode:{rawNode:i}}=this,l=o==null?void 0:o(i),r=t?t(i,!1):Be(i[this.labelField],i,!1),a=b("div",Object.assign({},l,{class:[`${e}-base-select-group-header`,l==null?void 0:l.class]}),r);return i.render?i.render({node:a,option:i}):n?n({node:a,option:i,selected:!1}):a}}),un=V("base-select-menu",`
 line-height: 1.5;
 outline: none;
 z-index: 0;
 position: relative;
 border-radius: var(--n-border-radius);
 transition:
 background-color .3s var(--n-bezier),
 box-shadow .3s var(--n-bezier);
 background-color: var(--n-color);
`,[V("scrollbar",`
 max-height: var(--n-height);
 `),V("virtual-list",`
 max-height: var(--n-height);
 `),V("base-select-option",`
 min-height: var(--n-option-height);
 font-size: var(--n-option-font-size);
 display: flex;
 align-items: center;
 `,[G("content",`
 z-index: 1;
 white-space: nowrap;
 text-overflow: ellipsis;
 overflow: hidden;
 `)]),V("base-select-group-header",`
 min-height: var(--n-option-height);
 font-size: .93em;
 display: flex;
 align-items: center;
 `),V("base-select-menu-option-wrapper",`
 position: relative;
 width: 100%;
 `),G("loading, empty",`
 display: flex;
 padding: 12px 32px;
 flex: 1;
 justify-content: center;
 `),G("loading",`
 color: var(--n-loading-color);
 font-size: var(--n-loading-size);
 `),G("header",`
 padding: 8px var(--n-option-padding-left);
 font-size: var(--n-option-font-size);
 transition: 
 color .3s var(--n-bezier),
 border-color .3s var(--n-bezier);
 border-bottom: 1px solid var(--n-action-divider-color);
 color: var(--n-action-text-color);
 `),G("action",`
 padding: 8px var(--n-option-padding-left);
 font-size: var(--n-option-font-size);
 transition: 
 color .3s var(--n-bezier),
 border-color .3s var(--n-bezier);
 border-top: 1px solid var(--n-action-divider-color);
 color: var(--n-action-text-color);
 `),V("base-select-group-header",`
 position: relative;
 cursor: default;
 padding: var(--n-option-padding);
 color: var(--n-group-header-text-color);
 `),V("base-select-option",`
 cursor: pointer;
 position: relative;
 padding: var(--n-option-padding);
 transition:
 color .3s var(--n-bezier),
 opacity .3s var(--n-bezier);
 box-sizing: border-box;
 color: var(--n-option-text-color);
 opacity: 1;
 `,[Z("show-checkmark",`
 padding-right: calc(var(--n-option-padding-right) + 20px);
 `),X("&::before",`
 content: "";
 position: absolute;
 left: 4px;
 right: 4px;
 top: 0;
 bottom: 0;
 border-radius: var(--n-border-radius);
 transition: background-color .3s var(--n-bezier);
 `),X("&:active",`
 color: var(--n-option-text-color-pressed);
 `),Z("grouped",`
 padding-left: calc(var(--n-option-padding-left) * 1.5);
 `),Z("pending",[X("&::before",`
 background-color: var(--n-option-color-pending);
 `)]),Z("selected",`
 color: var(--n-option-text-color-active);
 `,[X("&::before",`
 background-color: var(--n-option-color-active);
 `),Z("pending",[X("&::before",`
 background-color: var(--n-option-color-active-pending);
 `)])]),Z("disabled",`
 cursor: not-allowed;
 `,[bt("selected",`
 color: var(--n-option-text-color-disabled);
 `),Z("selected",`
 opacity: var(--n-option-opacity-disabled);
 `)]),G("check",`
 font-size: 16px;
 position: absolute;
 right: calc(var(--n-option-padding-right) - 4px);
 top: calc(50% - 7px);
 color: var(--n-option-check-color);
 transition: color .3s var(--n-bezier);
 `,[St({enterScale:"0.5"})])])]),kn=W({name:"InternalSelectMenu",props:Object.assign(Object.assign({},ne.props),{clsPrefix:{type:String,required:!0},scrollable:{type:Boolean,default:!0},treeMate:{type:Object,required:!0},multiple:Boolean,size:{type:String,default:"medium"},value:{type:[String,Number,Array],default:null},autoPending:Boolean,virtualScroll:{type:Boolean,default:!0},show:{type:Boolean,default:!0},labelField:{type:String,default:"label"},valueField:{type:String,default:"value"},loading:Boolean,focusable:Boolean,renderLabel:Function,renderOption:Function,nodeProps:Function,showCheckmark:{type:Boolean,default:!0},onMousedown:Function,onScroll:Function,onFocus:Function,onBlur:Function,onKeyup:Function,onKeydown:Function,onTabOut:Function,onMouseenter:Function,onMouseleave:Function,onResize:Function,resetMenuOnOptionsChange:{type:Boolean,default:!0},inlineThemeDisabled:Boolean,onToggle:Function}),setup(e){const{mergedClsPrefixRef:t,mergedRtlRef:n}=Ae(e),o=wt("InternalSelectMenu",n,t),i=ne("InternalSelectMenu","-internal-select-menu",un,xt,e,j(e,"clsPrefix")),l=D(null),r=D(null),a=D(null),v=M(()=>e.treeMate.getFlattenedNodes()),u=M(()=>Ut(v.value)),d=D(null);function c(){const{treeMate:s}=e;let f=null;const{value:F}=e;F===null?f=s.getFirstAvailableNode():(e.multiple?f=s.getNode((F||[])[(F||[]).length-1]):f=s.getNode(F),(!f||f.disabled)&&(f=s.getFirstAvailableNode())),C(f||null)}function S(){const{value:s}=d;s&&!e.treeMate.getNode(s.key)&&(d.value=null)}let T;Ce(()=>e.show,s=>{s?T=Ce(()=>e.treeMate,()=>{e.resetMenuOnOptionsChange?(e.autoPending?c():S(),Pt(N)):S()},{immediate:!0}):T==null||T()},{immediate:!0}),Fe(()=>{T==null||T()});const m=M(()=>he(i.value.self[Y("optionHeight",e.size)])),P=M(()=>se(i.value.self[Y("padding",e.size)])),_=M(()=>e.multiple&&Array.isArray(e.value)?new Set(e.value):new Set),x=M(()=>{const s=v.value;return s&&s.length===0});function k(s){const{onToggle:f}=e;f&&f(s)}function E(s){const{onScroll:f}=e;f&&f(s)}function g(s){var f;(f=a.value)===null||f===void 0||f.sync(),E(s)}function p(){var s;(s=a.value)===null||s===void 0||s.sync()}function L(){const{value:s}=d;return s||null}function B(s,f){f.disabled||C(f,!1)}function K(s,f){f.disabled||k(f)}function A(s){var f;Re(s,"action")||(f=e.onKeyup)===null||f===void 0||f.call(e,s)}function z(s){var f;Re(s,"action")||(f=e.onKeydown)===null||f===void 0||f.call(e,s)}function h(s){var f;(f=e.onMousedown)===null||f===void 0||f.call(e,s),!e.focusable&&s.preventDefault()}function y(){const{value:s}=d;s&&C(s.getNext({loop:!0}),!0)}function w(){const{value:s}=d;s&&C(s.getPrev({loop:!0}),!0)}function C(s,f=!1){d.value=s,f&&N()}function N(){var s,f;const F=d.value;if(!F)return;const Q=u.value(F.key);Q!==null&&(e.virtualScroll?(s=r.value)===null||s===void 0||s.scrollTo({index:Q}):(f=a.value)===null||f===void 0||f.scrollTo({index:Q,elSize:m.value}))}function O(s){var f,F;!((f=l.value)===null||f===void 0)&&f.contains(s.target)&&((F=e.onFocus)===null||F===void 0||F.call(e,s))}function R(s){var f,F;!((f=l.value)===null||f===void 0)&&f.contains(s.relatedTarget)||(F=e.onBlur)===null||F===void 0||F.call(e,s)}Te(me,{handleOptionMouseEnter:B,handleOptionClick:K,valueSetRef:_,pendingTmNodeRef:d,nodePropsRef:j(e,"nodeProps"),showCheckmarkRef:j(e,"showCheckmark"),multipleRef:j(e,"multiple"),valueRef:j(e,"value"),renderLabelRef:j(e,"renderLabel"),renderOptionRef:j(e,"renderOption"),labelFieldRef:j(e,"labelField"),valueFieldRef:j(e,"valueField")}),Te(zt,l),ge(()=>{const{value:s}=a;s&&s.sync()});const I=M(()=>{const{size:s}=e,{common:{cubicBezierEaseInOut:f},self:{height:F,borderRadius:Q,color:We,groupHeaderTextColor:Ue,actionDividerColor:Ze,optionTextColorPressed:Ye,optionTextColor:Xe,optionTextColorDisabled:qe,optionTextColorActive:Qe,optionOpacityDisabled:Je,optionCheckColor:et,actionTextColor:tt,optionColorPending:nt,optionColorActive:ot,loadingColor:it,loadingSize:rt,optionColorActivePending:lt,[Y("optionFontSize",s)]:st,[Y("optionHeight",s)]:at,[Y("optionPadding",s)]:re}}=i.value;return{"--n-height":F,"--n-action-divider-color":Ze,"--n-action-text-color":tt,"--n-bezier":f,"--n-border-radius":Q,"--n-color":We,"--n-option-font-size":st,"--n-group-header-text-color":Ue,"--n-option-check-color":et,"--n-option-color-pending":nt,"--n-option-color-active":ot,"--n-option-color-active-pending":lt,"--n-option-height":at,"--n-option-opacity-disabled":Je,"--n-option-text-color":Xe,"--n-option-text-color-active":Qe,"--n-option-text-color-disabled":qe,"--n-option-text-color-pressed":Ye,"--n-option-padding":re,"--n-option-padding-left":se(re,"left"),"--n-option-padding-right":se(re,"right"),"--n-loading-color":it,"--n-loading-size":rt}}),{inlineThemeDisabled:H}=e,$=H?_e("internal-select-menu",M(()=>e.size[0]),I,e):void 0,U={selfRef:l,next:y,prev:w,getPendingTmNode:L};return Et(l,e.onResize),Object.assign({mergedTheme:i,mergedClsPrefix:t,rtlEnabled:o,virtualListRef:r,scrollbarRef:a,itemSize:m,padding:P,flattenedNodes:v,empty:x,virtualListContainer(){const{value:s}=r;return s==null?void 0:s.listElRef},virtualListContent(){const{value:s}=r;return s==null?void 0:s.itemsElRef},doScroll:E,handleFocusin:O,handleFocusout:R,handleKeyUp:A,handleKeyDown:z,handleMouseDown:h,handleVirtualListResize:p,handleVirtualListScroll:g,cssVars:H?void 0:I,themeClass:$==null?void 0:$.themeClass,onRender:$==null?void 0:$.onRender},U)},render(){const{$slots:e,virtualScroll:t,clsPrefix:n,mergedTheme:o,themeClass:i,onRender:l}=this;return l==null||l(),b("div",{ref:"selfRef",tabindex:this.focusable?0:-1,class:[`${n}-base-select-menu`,this.rtlEnabled&&`${n}-base-select-menu--rtl`,i,this.multiple&&`${n}-base-select-menu--multiple`],style:this.cssVars,onFocusin:this.handleFocusin,onFocusout:this.handleFocusout,onKeyup:this.handleKeyUp,onKeydown:this.handleKeyDown,onMousedown:this.handleMouseDown,onMouseenter:this.onMouseenter,onMouseleave:this.onMouseleave},Pe(e.header,r=>r&&b("div",{class:`${n}-base-select-menu__header`,"data-header":!0,key:"header"},r)),this.loading?b("div",{class:`${n}-base-select-menu__loading`},b(kt,{clsPrefix:n,strokeWidth:20})):this.empty?b("div",{class:`${n}-base-select-menu__empty`,"data-empty":!0},Tt(e.empty,()=>[b(cn,{theme:o.peers.Empty,themeOverrides:o.peerOverrides.Empty})])):b(Ct,{ref:"scrollbarRef",theme:o.peers.Scrollbar,themeOverrides:o.peerOverrides.Scrollbar,scrollable:this.scrollable,container:t?this.virtualListContainer:void 0,content:t?this.virtualListContent:void 0,onScroll:t?void 0:this.doScroll},{default:()=>t?b(Mt,{ref:"virtualListRef",class:`${n}-virtual-list`,items:this.flattenedNodes,itemSize:this.itemSize,showScrollbar:!1,paddingTop:this.padding.top,paddingBottom:this.padding.bottom,onResize:this.handleVirtualListResize,onScroll:this.handleVirtualListScroll,itemResizable:!0},{default:({item:r})=>r.isGroup?b(Ie,{key:r.key,clsPrefix:n,tmNode:r}):r.ignored?null:b(Oe,{clsPrefix:n,key:r.key,tmNode:r})}):b("div",{class:`${n}-base-select-menu-option-wrapper`,style:{paddingTop:this.padding.top,paddingBottom:this.padding.bottom}},this.flattenedNodes.map(r=>r.isGroup?b(Ie,{key:r.key,clsPrefix:n,tmNode:r}):b(Oe,{clsPrefix:n,key:r.key,tmNode:r})))}),Pe(e.action,r=>r&&[b("div",{class:`${n}-base-select-menu__action`,"data-action":!0,key:"action"},r),b(Ft,{onFocus:this.onTabOut,key:"focus-detector"})]))}});function ie(e){return e.type==="group"}function je(e){return e.type==="ignored"}function Cn(e,t){try{return!!(1+t.toString().toLowerCase().indexOf(e.trim().toLowerCase()))}catch{return!1}}function Tn(e,t){return{getIsGroup:ie,getIgnored:je,getKey(o){return ie(o)?o.name||o.key||"key-required":o[e]},getChildren(o){return o[t]}}}function Pn(e,t,n,o){if(!t)return e;function i(l){if(!Array.isArray(l))return[];const r=[];for(const a of l)if(ie(a)){const v=i(a[o]);v.length&&r.push(Object.assign({},a,{[o]:v}))}else{if(je(a))continue;t(n,a)&&r.push(a)}return r}return i(e)}function zn(e,t,n){const o=new Map;return e.forEach(i=>{ie(i)?i[n].forEach(l=>{o.set(l[t],l)}):o.set(i[t],i)}),o}const be="SECRET_TOKEN";function fn(){return q.get(be)}function hn(e){return q.set(be,e)}function vn(){return q.remove(be)}function gn({url:e,data:t,method:n,headers:o,onDownloadProgress:i,signal:l,beforeRequest:r,afterRequest:a}){const v=c=>{const S=Ve();return c.data.status==="Success"||typeof c.data=="string"?c.data:(c.data.status==="Unauthorized"&&(S.removeToken(),window.location.reload()),Promise.reject(c.data))},u=c=>{throw a==null||a(),new Error((c==null?void 0:c.message)||"Error")};r==null||r(),n=n||"GET";const d=Object.assign(typeof t=="function"?t():t??{},{});return n==="GET"?ze.get(e,{params:d,signal:l,onDownloadProgress:i}).then(v,u):ze.post(e,d,{headers:o,signal:l,onDownloadProgress:i}).then(v,u)}function Se({url:e,data:t,method:n="POST",headers:o,onDownloadProgress:i,signal:l,beforeRequest:r,afterRequest:a}){return gn({url:e,method:n,data:t,headers:o,onDownloadProgress:i,signal:l,beforeRequest:r,afterRequest:a})}function Rn(){return Se({url:"/config"})}function Nn(e){const t=Sn(),n=Ve();let o={prompt:e.prompt,options:e.options};return n.isChatGPTAPI&&(o={...o,systemMessage:t.systemMessage,temperature:t.temperature,top_p:t.top_p}),Se({url:"/chat-process",data:o,signal:e.signal,onDownloadProgress:e.onDownloadProgress})}function pn(){return Se({url:"/session"})}const Ve=He("auth-store",{state:()=>({token:fn(),session:null}),getters:{isChatGPTAPI(e){var t;return((t=e.session)==null?void 0:t.model)==="ChatGPTAPI"}},actions:{async getSession(){try{const{data:e}=await pn();return this.session={...e},Promise.resolve(e)}catch(e){return Promise.reject(e)}},setToken(e){this.token=e,hn(e)},removeToken(){this.token=void 0,vn()}}}),we="settingsStorage";function De(){return{systemMessage:"You are ChatGPT, a large language model trained by OpenAI. Follow the user's instructions carefully. Respond using markdown.",temperature:.8,top_p:1}}function mn(){const e=q.get(we);return{...De(),...e}}function yn(e){q.set(we,e)}function bn(){q.remove(we)}const Sn=He("setting-store",{state:()=>mn(),actions:{updateSetting(e){this.$state={...this.$state,...e},this.recordState()},resetSetting(){this.$state=De(),bn()},recordState(){yn(this.$state)}}});export{kn as N,Tn as a,Pn as b,xn as c,zn as d,Ve as e,Nn as f,Rn as g,Re as h,Sn as i,Cn as p,Et as u};
